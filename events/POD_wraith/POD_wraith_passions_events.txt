namespace = POD_wraith_passions

###################################
# Indulge Passion: Hatred.
###################################
POD_wraith_passions.100 = {
    type = character_event
    content_source = dlc_POD
    title = POD_wraith_passions.100.t
    desc = POD_wraith_passions.100.desc

    right_portrait = root
    theme = wraith

    immediate = {
        POD_end_journey_effect = yes
    }

    # Observe mortal.
    option = {
        name = POD_wraith_passions.100.option.a
        trigger_event = POD_wraith_passions.110
    }

    # Indulge Dark Passion. Should always be last in list.
    option = {
        name = POD_wraith_passions.100.option.b
        trigger_event = POD_wraith_passions.120
    }

    # No option to back out, as observing a mortal is a safe option anyway.
}

# Indulge Hatred by observing a mortal (% chance to regain small amount of Pathos).
POD_wraith_passions.110 = {
    type = character_event
    content_source = dlc_POD
    title = POD_wraith_passions.110.t
    desc = POD_wraith_passions.110.desc

    immediate = {
        create_character = {
            location = root.location
            template = pool_repopulate_martial
            trait = mortal
            faith = faith:innocence
            random_traits = yes
        
            save_scope_as = victim
        }
    }

    left_portrait = root
    right_portrait = {
        character = scope:victim
    }
    theme = wraith
    
    option = {
        name = POD_wraith_passions.110.confirm
        flavor = POD_wraith_passions.110.confirm.flavor
        POD_pulse_chance_passion = { TYPE = hatred }
    }
}

#Indulge Hatred by wanton slaughter (Dark Passion, but fully refill Pathos)
POD_wraith_passions.120 = {
    type = character_event
    content_source = dlc_POD
    title = POD_wraith_passions.120.t
    desc = POD_wraith_passions.120.desc

    immediate = {
        create_character = {
            location = root.location
            template = pool_repopulate_martial
            trait = wraith
            faith = faith:
            random_traits = yes
        
            save_scope_as = victim
        }
        scope:victim = {
            trigger_event = {
                id = POD_wraith_maintenance.20
            }
        }
    }

    left_portrait = root
    right_portrait = {
        character = scope:victim
    }
    theme = wraith
    option = {
        name = POD_wraith_passions.120.confirm
        flavor = POD_wraith_passions.120.confirm.flavor
        POD_pathos_income_effect = { COUNT = 5 }
		POD_static_stress_gain = { COUNT = 100 }
    }
}


# POD_wraith_passions.100 = {
# 	type = character_event
# 	content_source = dlc_POD
# 	title = POD_wraith_passions.100.t
# 	desc = POD_wraith_passions.100.desc
# 	right_portrait = root
# 	theme = wraith
	
# 	immediate = {
# 	}
	
# 	option = {
# 		name = POD_wraith_passions.100.option.a
# 		add_internal_flag = special
# 		trigger = { 
# 			var:passion_count >= 5
# 			has_variable = my_killer
# 			var:my_killer = { is_alive = yes }
# 			NOT = { has_character_flag = passion_find_killer_flag }
# 		}
		
# 		add_character_flag = passion_find_killer_flag
# 		change_variable = { name = passion_count subtract = 5 }
		
# 		trigger_event = POD_wraith_passions.100
# 	}
	
# 	option = {
# 		name = POD_wraith_passions.100.option.b
		
# 		trigger = { 
# 			var:passion_count >= 2
# 			NOT = { has_trait = generous }
# 			gold < medium_gold_value_check
# 			NOT = { has_character_flag = passion_amass_wealth_flag }
# 		}
# 		show_as_unavailable = {
# 			has_trait = generous
# 		}
		
# 		add_character_flag = passion_amass_wealth_flag
# 		change_variable = { name = passion_count subtract = 2 }
		
# 		trigger_event = POD_wraith_passions.100
# 	}
	
# 	option = {
# 		name = POD_wraith_passions.100.option.c
		
# 		trigger = { 
# 			var:passion_count >= 3
# 			prestige_level <= 1
# 			has_trait = content
# 			NOT = { has_character_flag = passion_become_exalted_flag }
# 		}
# 		show_as_unavailable = {
# 			has_trait = content
# 		}
		
# 		add_character_flag = passion_become_exalted_flag
# 		change_variable = { name = passion_count subtract = 3 }
		
# 		trigger_event = POD_wraith_passions.100
# 	}
	
# 	option = {
# 		name = POD_wraith_passions.100.option.d
		
# 		trigger = { 
# 			var:passion_count >= 2
# 			piety_level <= 1
# 			NOT = { has_trait = cynical }
# 			NOT = { has_character_flag = passion_become_paragon_flag }
# 		}
# 		show_as_unavailable = {
# 			has_trait = cynical
# 		}
		
# 		add_character_flag = passion_become_paragon_flag
# 		change_variable = { name = passion_count subtract = 2 }
		
# 		trigger_event = POD_wraith_passions.100
# 	}
	
# 	option = {
# 		name = POD_wraith_passions.100.option.e
		
# 		trigger = { 
# 			var:passion_count >= 4
# 			any_character_artifact = { count < 3 }
# 			NOT = { has_character_flag = passion_create_a_treasury_flag }
# 		}
		
# 		add_character_flag = passion_create_a_treasury_flag
# 		change_variable = { name = passion_count subtract = 4 }
		
# 		trigger_event = POD_wraith_passions.100
# 	}
	
# 	option = {
# 		name = POD_wraith_passions.100.option.f
		
# 		trigger = { 
# 			var:passion_count >= 1
# 			capital_province = { 
# 				has_special_building = no
# 				has_special_building_slot = yes
# 			}
# 			NOT = { has_character_flag = passion_build_a_great_work_flag }
# 		}
		
# 		capital_province = {
# 			root = {
# 				set_variable = {
# 					name = my_capital
# 					value = prev
# 				}
# 			}
# 		}
# 		add_character_flag = passion_build_a_great_work_flag
# 		change_variable = { name = passion_count subtract = 2 }
		
# 		trigger_event = POD_wraith_passions.100
# 	}
	
# 	option = {
# 		name = POD_wraith_passions.100.option.g
		
# 		trigger = { 
# 			var:passion_count >= 3
# 			NOT = { has_trait = shy }
# 			num_of_relation_best_friend = 0
# 			NOT = { has_character_flag = passion_make_a_friend_flag }
# 		}
# 		show_as_unavailable = {
# 			has_trait = shy
# 		}
		
# 		add_character_flag = passion_make_a_friend_flag
# 		change_variable = { name = passion_count subtract = 3 }
		
# 		trigger_event = POD_wraith_passions.100
# 	}
	
# 	option = {
# 		name = POD_wraith_passions.100.option.h
		
# 		trigger = { 
# 			var:passion_count >= 2
# 			NOT = { 
# 				has_trait_rank = {
# 					trait = kinslayer
# 					rank >= 1
# 				}
# 			}
# 			house = { 
# 				any_house_member = {
# 					count >= 1
# 					NOT = { this = root }
# 				}
# 			}
# 			NOT = { has_character_flag = passion_protect_family_flag }
# 		}
# 		show_as_unavailable = {
# 			has_trait_rank = {
# 				trait = kinslayer
# 				rank >= 1
# 			}
# 		}
		
# 		add_character_flag = passion_protect_family_flag
# 		change_variable = { name = passion_count subtract = 2 }
		
# 		trigger_event = POD_wraith_passions.100
# 		trigger_event = {
# 			id = POD_wraith_passions.101
# 			years = 1
# 		}
# 	}
# 	option = {
# 		name = POD_wraith_passions.100.option.i
# 		trigger = { 
# 			var:passion_count >= 4
# 			num_of_relation_rival >= 1
# 			NOT = { has_character_flag = passion_kill_rival_flag }
# 		}
		
# 		random_relation = {
# 			type = rival
# 			root = {
# 				set_variable = {
# 					name = my_rival
# 					value = prev
# 				}
# 			}
# 		}
# 		add_character_flag = passion_kill_rival_flag
# 		change_variable = { name = passion_count subtract = 4 }
		
# 		trigger_event = POD_wraith_passions.100
# 	}
	
# 	option = {
# 		name = POD_wraith_passions.100.option.back
# 	}
# }

# POD_wraith_passions.101 = {
# 	hidden = yes
	
# 	trigger = {
# 		has_character_flag = passion_protect_family_flag
# 	}
	
# 	immediate = {
# 		add_character_flag = finish_protect_family_flag
# 	}
# }